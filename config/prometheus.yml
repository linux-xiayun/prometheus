global:                    # 全局设置
  scrape_interval:     60s # 用于向pushgateway采集数据的频率
  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.表示规则计算的频率
  external_labels: 
    cid: '1'

alerting:
  alertmanagers:
  - static_configs:
    - targets: ['172.16.18.6:9093']

rule_files: 
  - /etc/prometheus/rules.yml
  - /etc/prometheus/rules/*.rules

remote_write:
  - url: "http://x.x.x.x:9301/write"
    write_relabel_configs:
      - source_labels: ["job"]
        regex: "算法服务|ngrok-server|cadvisor" 
        action: keep

remote_read:
  - url: "http://x.x.x.x:9301/read"

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
    - targets: ['localhost:9090','172.16.18.6:9100']

  - job_name: 'consul-prometheus'
    consul_sd_configs:
      - server: '127.0.0.1:8500'
        services: []

  - job_name: 'file_ds'
    file_sd_configs:
    - refresh_interval: 2m 
      files:
      - /etc/prometheus/targets.json
  
  - job_name: 'cadvisor'
    static_configs:
    - targets: ['172.16.18.6:8080']

  - job_name: 'pushgateway_suanfa'
    honor_labels: true
    static_configs:
    - targets: ['172.16.18.6:9091']

  - job_name: '算法服务'
    static_configs:
    - targets: ['39.104.209.31:9100','39.104.89.63:9100','172.16.3.13:9100','172.16.3.81:9100']
      labels:
        server: suanfa
  
  - job_name: 'xy-test'
    static_configs:
    - targets: ['172.16.10.154:9100','172.16.10.153:9100',]

  - job_name: 'tx-java-alived'
    honor_labels: true
    static_configs:
    - targets: ['172.16.18.6:9091']
      labels:
        instance: tx

  - job_name: 'ngrok-server'
    honor_labels: true
    static_configs:
    - targets: ['172.16.18.6:9091']

#  - job_name: 'abc'
#    static_configs:
#    - targets: ['172.16.3.1:9100','172.16.3.2:9100','172.16.3.3:9100','172.16.3.4:9100','172.16.3.5:9100','172.16.3.6:9100','172.16.3.9:9100','172.16.3.11:9100','172.16.3.12:9100','172.16.3.13:9100','172.16.3.14:9100','172.16.3.17:9100','172.16.3.18:9100','172.16.3.19:9100','172.16.3.20:9100','172.16.3.21:9100','172.16.3.23:9100','172.16.3.24:9100','172.16.3.27:9100','172.16.3.28:9100','172.16.3.29:9100','172.16.3.30:9100','172.16.3.31:9100','172.16.3.32:9100','172.16.3.33:9100','172.16.3.34:9100','172.16.3.35:9100','172.16.3.36:9100','172.16.3.37:9100','172.16.3.38:9100','172.16.3.39:9100','172.16.3.40:9100','172.16.3.41:9100','172.16.3.42:9100','172.16.3.43:9100','172.16.3.44:9100','172.16.3.45:9100','172.16.3.46:9100','172.16.3.47:9100','172.16.3.48:9100','172.16.3.49:9100','172.16.3.50:9100','172.16.3.51:9100','172.16.3.52:9100','172.16.3.53:9100','172.16.3.54:9100','172.16.3.55:9100','172.16.3.56:9100','172.16.3.57:9100','172.16.3.58:9100','172.16.3.59:9100','172.16.3.60:9100','172.16.3.61:9100','172.16.3.62:9100','172.16.3.63:9100','172.16.3.64:9100','172.16.3.69:9100','172.16.3.70:9100','172.16.3.71:9100','172.16.3.72:9100','172.16.3.73:9100','172.16.3.74:9100','172.16.3.75:9100','172.16.3.76:9100','172.16.3.77:9100','172.16.3.78:9100','172.16.3.79:9100','172.16.3.80:9100','172.16.3.81:9100','172.16.3.200:9100','172.16.3.244:9100','172.16.3.245:9100','172.16.7.3:9100','172.16.7.4:9100','172.16.7.5:9100','172.16.7.7:9100','172.16.7.8:9100','172.16.7.9:9100','172.16.7.10:9100','172.16.7.11:9100','172.16.7.12:9100','172.16.7.13:9100','172.16.7.14:9100','172.16.7.15:9100','172.16.7.16:9100','172.16.7.17:9100','172.16.7.18:9100','172.16.7.19:9100','172.16.7.20:9100','172.16.7.21:9100','172.16.7.22:9100','172.16.7.24:9100','172.16.7.25:9100','172.16.7.26:9100','172.16.7.27:9100','172.16.7.28:9100','172.16.7.29:9100','172.16.7.30:9100','172.16.7.170:9100','172.16.7.171:9100']

#  - job_name: 'abcd'
#    static_configs:
#    - targets: ['172.16.13.12:9100','172.16.13.166:9100','172.16.13.8:9100','172.16.13.4:9100','172.16.13.14:9100','172.16.13.16:9100','172.16.13.2:9100','172.16.13.3:9100','172.16.13.5:9100','172.16.13.6:9100','172.16.13.11:9100','172.16.13.9:9100','172.16.13.10:9100','172.16.13.7:9100','172.16.13.13:9100','172.16.13.17:9100','172.16.13.18:9100','172.16.13.19:9100','172.16.13.20:9100']

#  - job_name: 'abcde'
#    static_configs:
#    - targets: ['172.16.11.3:9100','172.16.11.4:9100','172.16.11.6:9100','172.16.11.7:9100','172.16.11.8:9100','172.16.11.9:9100','172.16.11.10:9100','172.16.11.11:9100','172.16.11.12:9100','172.16.11.13:9100','172.16.11.14:9100','172.16.11.15:9100','172.16.11.16:9100','172.16.11.17:9100','172.16.11.18:9100','172.16.11.19:9100','172.16.11.20:9100','172.16.11.21:9100','172.16.11.23:9100','172.16.11.24:9100','172.16.11.25:9100','172.16.11.26:9100','172.16.11.106:9100','172.16.11.107:9100']

#  - job_name: 'apcdef'
#    static_configs:
#    - targets: ['172.16.10.6:9100','172.16.10.7:9100','172.16.10.8:9100','172.16.10.9:9100','172.16.10.10:9100','172.16.10.11:9100','172.16.10.12:9100','172.16.10.13:9100','172.16.10.14:9100','172.16.10.15:9100','172.16.10.16:9100','172.16.10.17:9100','172.16.10.140:9100','172.16.10.141:9100','172.16.10.148:9100','172.16.10.150:9100','172.16.10.151:9100','172.16.10.152:9100','172.16.10.153:9100','172.16.10.154:9100']

#  - job_name: 'abcdefg'
#    static_configs:
#    - targets: ['172.16.180.45:9100','172.16.180.46:9100','172.16.180.44:9100','172.16.180.43:9100','172.16.180.41:9100','172.16.180.40:9100','172.16.180.32:9100','172.16.180.30:9100','172.16.180.29:9100','172.16.180.26:9100','172.16.180.25:9100','172.16.180.22:9100','172.16.180.23:9100','172.16.180.21:9100','172.16.180.13:9100','172.16.180.14:9100','172.16.180.12:9100','172.16.180.7:9100','172.16.180.8:9100','172.16.180.6:9100','172.16.9.4:9100','172.16.2.4:9100','172.16.6.2:9100','172.16.6.3:9100']

#  - job_name: 'abcdefgh'
#    static_configs:
#    - targets: ['172.16.4.4:9100','172.16.4.5:9100','172.16.4.6:9100','172.16.4.7:9100','172.16.4.8:9100','172.16.4.9:9100','172.16.4.10:9100','172.16.4.11:9100','172.16.4.214:9100','172.16.4.215:9100','172.16.4.216:9100','172.16.4.217:9100','172.16.4.218:9100']

#  - job_name: 'abcdefghi'
#    static_configs:
#    - targets: ['172.16.18.1:9100','172.16.18.2:9100','172.16.18.3:9100','172.16.18.4:9100','172.16.18.5:9100','172.16.18.6:9100']
